<h1><%= Subcategory.find(params[:category_id]).instrument %></h1>

<% if @products.where(category_id:params[:category_id]).count != 0 %>
    <table>
        <thead>
            <tr>
            <th>Title</th>
            <th>Picture</th>
            <th>Description</th>
            <th>Price</th>
            <th colspan="3"></th>
            </tr>
        </thead>

        <tbody>
        <% @products.where(category_id:params[:category_id]).each do |product| %>
            <tr>
                <td><%= product.title %></td>
                <td><%= product.description %></td>
                <td><a href="products/<%= product.id %>"><%= image_tag product.image, width: '100' %></a></td>
                <td><%= number_to_currency(product.price/100.0) %></td>
                <td><%= link_to 'Show', product %></td>
                <% if current_user.id == product.user_id %>
                    <td><%= link_to 'Edit', edit_product_path(product) %></td>
                    <td><%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %></td>
                <% end %>
                </tr>
            <% end %>
        </tbody>
    </table>
<% else %>
    <p><strong>There are no listings for this Instrument.</strong></p>
<% end %>

<%= link_to "Back", request.referer.present? ? request.referer : default_path %>